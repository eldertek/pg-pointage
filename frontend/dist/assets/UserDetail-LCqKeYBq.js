import{d as S,u as w,a as E,r as g,o as U,c as p,b as _,w as e,e as l,V as v,f as n,g as r,h as B,i as D,j as s,k as M,l as y,m as b,n as C,p as L,q as T,s as o,t as d,v as i,x as u,y as f,z as q,A as z,B as N,_ as G}from"./main-DmHz_kzC.js";const j={class:"d-flex align-center mb-4"},H={class:"text-h4"},O={class:"text-h4"},P=S({__name:"UserDetail",setup($){const k=w(),A=E(),c=k.params.id,V=g(!0),a=g({}),x=g({total_hours:0,anomalies:0}),I=async()=>{V.value=!0;try{const m=await N.getUser(Number(c));a.value=m.data;try{const t=await N.getUserStatistics(Number(c));x.value=t.data}catch(t){console.error("Erreur lors du chargement des statistiques:",t)}}catch(m){console.error("Erreur lors du chargement des données:",m)}finally{V.value=!1}},R=()=>{A.push(`/dashboard/admin/users/${c}/edit`)};return U(()=>{I()}),(m,t)=>(_(),p(z,{fluid:""},{default:e(()=>[l(v,null,{default:e(()=>[l(n,{cols:"12"},{default:e(()=>[r("div",j,[t[1]||(t[1]=r("h1",{class:"text-h4 font-weight-bold"},"Détails de l'utilisateur",-1)),l(B),l(D,{color:"primary","prepend-icon":"mdi-pencil",onClick:R},{default:e(()=>t[0]||(t[0]=[s(" Modifier ")])),_:1})]),V.value?(_(),p(v,{key:0},{default:e(()=>[l(n,{cols:"12",class:"text-center"},{default:e(()=>[l(M,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):(_(),p(v,{key:1},{default:e(()=>[l(n,{cols:"12",md:"6"},{default:e(()=>[l(y,null,{default:e(()=>[l(b,null,{default:e(()=>t[2]||(t[2]=[s("Informations personnelles")])),_:1}),l(C,null,{default:e(()=>[l(L,null,{default:e(()=>[l(o,null,{prepend:e(()=>[l(f,null,{default:e(()=>t[3]||(t[3]=[s("mdi-account")])),_:1})]),default:e(()=>[l(d,null,{default:e(()=>t[4]||(t[4]=[s("Nom complet")])),_:1}),l(i,null,{default:e(()=>[s(u(a.value.first_name)+" "+u(a.value.last_name),1)]),_:1})]),_:1}),l(o,null,{prepend:e(()=>[l(f,null,{default:e(()=>t[5]||(t[5]=[s("mdi-email")])),_:1})]),default:e(()=>[l(d,null,{default:e(()=>t[6]||(t[6]=[s("Email")])),_:1}),l(i,null,{default:e(()=>[s(u(a.value.email),1)]),_:1})]),_:1}),l(o,null,{prepend:e(()=>[l(f,null,{default:e(()=>t[7]||(t[7]=[s("mdi-badge-account")])),_:1})]),default:e(()=>[l(d,null,{default:e(()=>t[8]||(t[8]=[s("Rôle")])),_:1}),l(i,null,{default:e(()=>[l(q,{color:a.value.role==="MANAGER"?"primary":"success",size:"small"},{default:e(()=>[s(u(a.value.role==="MANAGER"?"Manager":"Employé"),1)]),_:1},8,["color"])]),_:1})]),_:1}),a.value.site_name?(_(),p(o,{key:0},{prepend:e(()=>[l(f,null,{default:e(()=>t[9]||(t[9]=[s("mdi-domain")])),_:1})]),default:e(()=>[l(d,null,{default:e(()=>t[10]||(t[10]=[s("Site")])),_:1}),l(i,null,{default:e(()=>[s(u(a.value.site_name),1)]),_:1})]),_:1})):T("",!0),l(o,null,{prepend:e(()=>[l(f,null,{default:e(()=>t[11]||(t[11]=[s("mdi-domain")])),_:1})]),default:e(()=>[l(d,null,{default:e(()=>t[12]||(t[12]=[s("Organisation")])),_:1}),l(i,null,{default:e(()=>[s(u(a.value.organization_name),1)]),_:1})]),_:1}),l(o,null,{prepend:e(()=>[l(f,{color:a.value.is_active?"success":"error"},{default:e(()=>[s(u(a.value.is_active?"mdi-check-circle":"mdi-close-circle"),1)]),_:1},8,["color"])]),default:e(()=>[l(d,null,{default:e(()=>t[13]||(t[13]=[s("Statut")])),_:1}),l(i,null,{default:e(()=>[s(u(a.value.is_active?"Actif":"Inactif"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(n,{cols:"12",md:"6"},{default:e(()=>[l(y,{class:"mb-4"},{default:e(()=>[l(b,null,{default:e(()=>t[14]||(t[14]=[s("Statistiques")])),_:1}),l(C,null,{default:e(()=>[l(v,null,{default:e(()=>[l(n,{cols:"6",class:"text-center"},{default:e(()=>[r("div",H,u(x.value.total_hours||0),1),t[15]||(t[15]=r("div",{class:"text-subtitle-1"},"Heures totales",-1))]),_:1}),l(n,{cols:"6",class:"text-center"},{default:e(()=>[r("div",O,u(x.value.anomalies||0),1),t[16]||(t[16]=r("div",{class:"text-subtitle-1"},"Anomalies",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1}))}}),J=G(P,[["__scopeId","data-v-c1f3d45b"]]);export{J as default};
